{
  "comments": [
    {
      "key": {
        "uuid": "f788eb8f_45093dba",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 372,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-05-01T17:22:01Z",
      "side": 1,
      "message": "filterByWhitelist",
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "235608f0_10eb0864",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 372,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-05-01T22:51:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f788eb8f_45093dba",
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cf885f58_068ea4ee",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 379,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-05-01T17:22:01Z",
      "side": 1,
      "message": "Wasn\u0027t it done already? \"While at it\"",
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "20dc27af_a98d2841",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 379,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-05-01T22:51:46Z",
      "side": 1,
      "message": "Ah, you\u0027re right; I was thinking I might need to update the gerrit project config, but that config still doesn\u0027t include repo details...\n\nDone.",
      "parentUuid": "cf885f58_068ea4ee",
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f3278b52_e997ae88",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 397,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-05-01T17:22:01Z",
      "side": 1,
      "message": "Move this line at 392, so you don\u0027t risk missing one like 414 and can remove lines 403, 408.",
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f9b30ca9_6d08f332",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 397,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-05-01T22:51:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f3278b52_e997ae88",
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0688bd57_e7d40820",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 411,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2018-05-01T17:33:01Z",
      "side": 1,
      "message": "again, unrelated to this CL: I believe tricium now always has auth initialized in the context, so it can use just auth.IsMember?",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 411,
        "endChar": 4
      },
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5294b316_50511f0b",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 411,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-05-01T22:51:46Z",
      "side": 1,
      "message": "auth.IsMember takes a context and groups, but not an ID; it checks whether the current user is a member of any groups. However in this case we don\u0027t want to check the current user identity (anonymous in the case of internal requests), we want to check whether the CL owner is a member.\n\nPotentially this could be simplified to auth.GetState(ctx).DB().IsMember(...), like it was before, with no error checking.",
      "parentUuid": "0688bd57_e7d40820",
      "range": {
        "startLine": 400,
        "startChar": 3,
        "endLine": 411,
        "endChar": 4
      },
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3dfdfa3a_28b4d723",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 414,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-05-01T17:22:01Z",
      "side": 1,
      "message": "In case of DB error, I prefer to err on the safe side.",
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ffd592a_0bf43111",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 414,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-05-01T22:51:46Z",
      "side": 1,
      "message": "Do you think this error message or check should be different?",
      "parentUuid": "3dfdfa3a_28b4d723",
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ed87406_35623684",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 416,
      "author": {
        "id": 1000487
      },
      "writtenOn": "2018-05-01T17:22:01Z",
      "side": 1,
      "message": "you can remove this line, change 418 to be:\n\n  } else if !whitelisted {\n\nthen you can merge lines 390 and 391.",
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "523e09c3_0684e05a",
        "filename": "go/src/infra/tricium/appengine/gerrit/poll.go",
        "patchSetId": 4
      },
      "lineNbr": 416,
      "author": {
        "id": 1003190
      },
      "writtenOn": "2018-05-01T22:51:46Z",
      "side": 1,
      "message": "Previously, if we did an auth check and found that the user was whitelisted, we would set whitelisted to false, and then enter the if clause below and then `continue`, thus not appending the change to the list.\n\nWe could make this change and make it an `else if` if we removed the continue and then also added `if whitelisted { ... append ...}` below. I\u0027m not sure whether that\u0027s any simpler or better though.",
      "parentUuid": "5ed87406_35623684",
      "revId": "93dc9b2c1bccfd54ddf9d84981fe05df0a7dae9f",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}