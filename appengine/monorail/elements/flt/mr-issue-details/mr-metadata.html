<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/iron-icon/iron-icon.html">

<dom-module id="mr-metadata">
  <template>
    <style>
      :host {
        box-sizing: border-box;
        padding: 0.5em 8px;
        max-width: 100%;
        display: block;
      }
      a.label {
        color: hsl(120, 100%, 25%);
        text-decoration: none;
      }
      table {
        table-layout: fixed;
        width: 100%;
      }
      td, th {
        padding: 0.5em 4px;
        vertical-align: top;
      }
      td {
        text-overflow: ellipsis;
        overflow: hidden;
        width: 60%;
      }
      th {
        float: left;
      }
      .restricted {
        background: hsl(30, 100%, 93%);
        border: 1px solid hsl(30, 40%, 85%);
        width: 100%;
        box-sizing: border-box;
        padding: 0.5em 8px;
        margin: 1em auto;
      }
      .restricted iron-icon {
        --iron-icon-fill-color: hsl(30, 5%, 39%);
      }
      .restricted strong {
        display: block;
        text-align: center;
        width: 100%;
        margin-bottom: 0.5em;
      }
    </style>
    <table>
      <tr>
        <th>Created:</th>
        <td>
          <chops-timestamp short></chops-timestamp>
        </td>
      </tr>
      <template is="dom-repeat" items="[[users]]" as="user">
        <tr>
          <th>[[user.name]]:</th>
          <td>
            <template is="dom-repeat" items="[[user.values]]">
              <a href$="[[item]]" title$="[[item]]">[[item]]</a><br />
            </template>
          </td>
        </tr>
      </template>

      <tr>
        <th>Priority:</th>
        <td>
          [[_priority]]
        </td>
      </tr>

      <tr>
        <th>Status:</th>
        <td>
          [[status]]
        </td>
      </tr>

      <tr>
        <th>Components:</th>
        <td>
          <template is="dom-repeat" items="[[components]]">
            <a href$="/p/chromium/issues/list?q=component:[[item]]">
              [[item]]
            </a>
          </template>
        </td>
      </tr>

      <template is="dom-repeat" items="[[links]]" as="link">
        <tr>
          <th>[[link.name]]:</th>
          <td>
            <template is="dom-repeat" items="[[link.values]]">
              <a href="[[item]]">[[item]]</a>
            </template>
          </td>
        </tr>
      </template>

      <template is="dom-repeat" items="[[strings]]" as="string">
        <tr>
          <th>[[string.name]]:</th>
          <td>
            <template is="dom-repeat" items="[[string.values]]">
              [[item]]
            </template>
          </td>
        </tr>
      </template>

      <template is="dom-repeat" items="[[ints]]" as="int">
        <tr>
          <th>[[int.name]]:</th>
          <td>
            <template is="dom-repeat" items="[[int.values]]">
              [[item]]
            </template>
          </td>
        </tr>
      </template>

      <template is="dom-if" if="[[blockedOn.length]]">
        <tr>
          <th>BlockedOn:</th>
          <td>
            <template is="dom-repeat" items="[[blockedOn]]">
              <a href="/p/chromium/issues/approval?id=[[item]]">
                Issue [[item]]</a>
              <br />
            </template>
          </td>
        </tr>
      </template>

      <template is="dom-if" if="[[blocking.length]]">
        <tr>
          <th>Blocking:</th>
          <td>
            <template is="dom-repeat" items="[[blocking]]">
              <a href="/p/chromium/issues/approval?id=[[item]]">
                Issue [[item]]</a>
              <br />
            </template>
          </td>
        </tr>
      </template>
    </table>

    <div class="labels-container">
      <template is="dom-repeat" items="[[_labelsList]]" as="label">
        <a href$="/p/chromium/issues/list?q=label:[[label]]" class="label">[[label]]</a><br />
      </template>
    </div>
    <div class="restricted">
      <strong><iron-icon icon="lock"></iron-icon>Restricted</strong>
      Only users with Google permission can see this issue.
    </div>
  </template>
  <script src="./mr-metadata.js"></script>
<dom-module>
