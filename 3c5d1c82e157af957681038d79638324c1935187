{
  "comments": [
    {
      "key": {
        "uuid": "e8dd172d_43043aeb",
        "filename": "appengine/chromium_status/appengine_module/chromium_status/status.py",
        "patchSetId": 1
      },
      "lineNbr": 424,
      "author": {
        "id": 1002100
      },
      "writtenOn": "2016-08-22T23:37:22Z",
      "side": 1,
      "message": "This would be \"\"\"\nfrom google.appengine.api import app_identity\nif app_identity.get_application_id() \u003d\u003d \u0027chromiumos-status\u0027:\n\"\"\"\n\nBut I\u0027d rather have it be based on a value in the datastore. Create a new datastore object which holds a preamble message, and if that object exists in the datastore and has a value, then display it. That way every project could take advantage of the preamble without having to put a project-specific switch statement here and redeploy all the apps.",
      "revId": "3c5d1c82e157af957681038d79638324c1935187",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8dd172d_83e56233",
        "filename": "appengine/chromium_status/appengine_module/chromium_status/status.py",
        "patchSetId": 1
      },
      "lineNbr": 424,
      "author": {
        "id": 1002377
      },
      "writtenOn": "2016-08-22T23:45:07Z",
      "side": 1,
      "message": "IS_CHROMIUMOS is already defined by base_page.py for some other purpose, so I was gonna hijack that.\n\nThat said, yeah, having a datastore value for the preamble might be nice. How do I fetch data here from the datastore, and how do I write to the datastore?",
      "parentUuid": "e8dd172d_43043aeb",
      "revId": "3c5d1c82e157af957681038d79638324c1935187",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8dd172d_c6e8587a",
        "filename": "appengine/chromium_status/appengine_module/chromium_status/status.py",
        "patchSetId": 1
      },
      "lineNbr": 424,
      "author": {
        "id": 1002100
      },
      "writtenOn": "2016-08-23T00:14:51Z",
      "side": 1,
      "message": "Oh it\u0027s already defined? That makes me cry. And in fact, reading the code which uses it, it should just be removed -- it\u0027s gating a regex which is only going to match on the chromiumos status app anyway, so letting it run in the other apps wouldn\u0027t cause any harm.\n\nHere\u0027s how you\u0027d use the datastore (you can see examples of this in base_page.py and status.py):\n\nfrom google.appengine.ext import db\n\nclass PreambleMessage(db.Model):\n  message \u003d db.StringProperty()\n\npreamble \u003d db.Query(PreambleMessage).order(-date).limit(1)\n\n\nIf you want to go whole-hog, you\u0027d also add a POST endpoint that lets administrators update the preamble; or you could just take advantage of the Cloud Console datastore editor to change it there.",
      "parentUuid": "e8dd172d_83e56233",
      "revId": "3c5d1c82e157af957681038d79638324c1935187",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8f6bfe3_03dd4e07",
        "filename": "appengine/chromium_status/appengine_module/chromium_status/status.py",
        "patchSetId": 1
      },
      "lineNbr": 424,
      "author": {
        "id": 1002377
      },
      "writtenOn": "2016-08-23T17:46:42Z",
      "side": 1,
      "message": "Adding a POST endpoint seems overboard for a seldom-edited string.\n\nBut, what happens when somebody else who isn\u0027t familiar with how this app is deployed wants to make a change to the custom text? I\u0027m not convinced that sending them off to cloud console to make edits in the data store is as transparent as sending them to the source code.",
      "parentUuid": "e8dd172d_c6e8587a",
      "revId": "3c5d1c82e157af957681038d79638324c1935187",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8f6bfe3_23cbaac1",
        "filename": "appengine/chromium_status/appengine_module/chromium_status/status.py",
        "patchSetId": 1
      },
      "lineNbr": 424,
      "author": {
        "id": 1002100
      },
      "writtenOn": "2016-08-23T18:25:07Z",
      "side": 1,
      "message": "Sending them to the source is probably more transparent, yes. Sending them to the source *and* having them redeploy the app is not. It also means that anyone with permissions can edit the string, instead of requiring a trooper to redeploy the app everywhere. And we\u0027d prefer not to only redeploy the chromeos-status instance of the app; having disparate versions deployed makes everything confusing.",
      "parentUuid": "a8f6bfe3_03dd4e07",
      "revId": "3c5d1c82e157af957681038d79638324c1935187",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8dd172d_43999ac8",
        "filename": "appengine/chromium_status/templates/main.html",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1002100
      },
      "writtenOn": "2016-08-22T23:37:22Z",
      "side": 1,
      "message": "Put this between the text entry box and the \"Last 25 status messages\" list. Keep user-interaction elements at a consistent height, basically.",
      "revId": "3c5d1c82e157af957681038d79638324c1935187",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8dd172d_a37b3e52",
        "filename": "appengine/chromium_status/templates/main.html",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1002377
      },
      "writtenOn": "2016-08-22T23:45:07Z",
      "side": 1,
      "message": "The intent is for this to be a \"Read this before editing the status\" type message, which was why I thought to put it above the status.\n\nBut yeah, you might be right.\n\nAlso, question: Is something going to barf if |premable| contains html?",
      "parentUuid": "e8dd172d_43999ac8",
      "revId": "3c5d1c82e157af957681038d79638324c1935187",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8dd172d_e6df1400",
        "filename": "appengine/chromium_status/templates/main.html",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1002100
      },
      "writtenOn": "2016-08-23T00:14:51Z",
      "side": 1,
      "message": "Not sure if the template engine will barf (it should), but I will if it doesn\u0027t. Templates should always autoescape everything they\u0027re using to fill fields.",
      "parentUuid": "e8dd172d_a37b3e52",
      "revId": "3c5d1c82e157af957681038d79638324c1935187",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8f6bfe3_a3267a1c",
        "filename": "appengine/chromium_status/templates/main.html",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1002377
      },
      "writtenOn": "2016-08-23T17:46:42Z",
      "side": 1,
      "message": "I\u0027m not really familiar with templating engines and their syntax. Does the one we\u0027re using here have a name, so I can read up on it and get this right?",
      "parentUuid": "e8dd172d_e6df1400",
      "revId": "3c5d1c82e157af957681038d79638324c1935187",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8f6bfe3_43a586f5",
        "filename": "appengine/chromium_status/templates/main.html",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1002100
      },
      "writtenOn": "2016-08-23T18:25:07Z",
      "side": 1,
      "message": "it\u0027s using google.appengine.ext.webapp.template, which is a wrapper around Django.",
      "parentUuid": "a8f6bfe3_a3267a1c",
      "revId": "3c5d1c82e157af957681038d79638324c1935187",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}