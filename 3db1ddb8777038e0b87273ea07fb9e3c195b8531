{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a112ca6a_60a20bd4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1392253
      },
      "writtenOn": "2022-09-15T05:38:41Z",
      "side": 1,
      "message": "The error message shows the actual maximum limitation of the summary_html field is 4096 bytes while the preset variable maxPrimaryErrorBytes is 1024. Let me know if you would like me to truncate the string up to 4096 instead of 1024.",
      "revId": "3db1ddb8777038e0b87273ea07fb9e3c195b8531",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c9f2c013_b2c7e79d",
        "filename": "go/src/infra/tools/result_adapter/skylab_test_runner.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1370239
      },
      "writtenOn": "2022-09-15T08:18:15Z",
      "side": 1,
      "message": "Just an observation, you may be better to pass the actual test log as the summary.  Having the failure reason and the summary as the same content is not really helpful to developers looking at the test failrues.",
      "revId": "3db1ddb8777038e0b87273ea07fb9e3c195b8531",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b4b80084_22940a96",
        "filename": "go/src/infra/tools/result_adapter/skylab_test_runner.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1392253
      },
      "writtenOn": "2022-09-15T11:20:59Z",
      "side": 1,
      "message": "This CL mainly aims to resolve the missing data issue and unblock Testhaus MVP. The content of the summary_html field was implemented by Navil before for the CQ use case. I personally prefer to leave it as before. Navil may have better insights for the CQ runs.",
      "parentUuid": "c9f2c013_b2c7e79d",
      "revId": "3db1ddb8777038e0b87273ea07fb9e3c195b8531",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dee0e811_168b9b67",
        "filename": "go/src/infra/tools/result_adapter/skylab_test_runner.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1392253
      },
      "writtenOn": "2022-09-15T11:28:01Z",
      "side": 1,
      "message": "Seems Navil is on leave for 10 days. I think this CL itself is safe and no business logic will be changed. If the content of the summary_html needs to be changed regarding the CQ requirement, it can be updated in a separate CL.",
      "parentUuid": "b4b80084_22940a96",
      "revId": "3db1ddb8777038e0b87273ea07fb9e3c195b8531",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7c987df_5d206894",
        "filename": "go/src/infra/tools/result_adapter/skylab_test_runner.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1128994
      },
      "writtenOn": "2022-09-15T22:04:24Z",
      "side": 1,
      "message": "Should the truncate be done after the \u003cpre\u003e...\u003c/pre\u003e substitution?",
      "parentUuid": "dee0e811_168b9b67",
      "revId": "3db1ddb8777038e0b87273ea07fb9e3c195b8531",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fdb31587_2cc76330",
        "filename": "go/src/infra/tools/result_adapter/skylab_test_runner.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1284623
      },
      "writtenOn": "2022-09-15T23:53:25Z",
      "side": 1,
      "message": "maxPrimaryErrorBytes corresponds to the maximum size of FailureReason.primary_error_message (1024).  But here you\u0027re populating TestResult.summary_html, which has a different max size (4096), so using the same limit is a bit confusing.",
      "range": {
        "startLine": 64,
        "startChar": 106,
        "endLine": 64,
        "endChar": 126
      },
      "revId": "3db1ddb8777038e0b87273ea07fb9e3c195b8531",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3177030d_66327c5f",
        "filename": "go/src/infra/tools/result_adapter/skylab_test_runner.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1392253
      },
      "writtenOn": "2022-09-16T00:24:50Z",
      "side": 1,
      "message": "Right. I noticed the diff and left a comment at the beginning to collect feedback. Change it to the different max size 4096 now and set an offset for the html tag.",
      "parentUuid": "fdb31587_2cc76330",
      "range": {
        "startLine": 64,
        "startChar": 106,
        "endLine": 64,
        "endChar": 126
      },
      "revId": "3db1ddb8777038e0b87273ea07fb9e3c195b8531",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "db6f9c40_1fd478fc",
        "filename": "go/src/infra/tools/result_adapter/skylab_test_runner.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1392253
      },
      "writtenOn": "2022-09-16T00:24:50Z",
      "side": 1,
      "message": "I don\u0027t think so because it would probably truncate the second tag \u003c/pre\u003e and break the html format.",
      "parentUuid": "c7c987df_5d206894",
      "revId": "3db1ddb8777038e0b87273ea07fb9e3c195b8531",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5f6fa746_ae93195b",
        "filename": "go/src/infra/tools/result_adapter/skylab_test_runner.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1128994
      },
      "writtenOn": "2022-09-16T01:20:42Z",
      "side": 1,
      "message": "I see, should it try to make sure it could still fit after the characters from the tag? Otherwise presumably you\u0027re run into similar oversize issue?",
      "parentUuid": "db6f9c40_1fd478fc",
      "revId": "3db1ddb8777038e0b87273ea07fb9e3c195b8531",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "53fb7f1a_cd4ca918",
        "filename": "go/src/infra/tools/result_adapter/skylab_test_runner.go",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1392253
      },
      "writtenOn": "2022-09-16T02:26:14Z",
      "side": 1,
      "message": "Got it. Truncate the whole string with the escape char replacement and the exact html format offset. In addition, added unit test for validation.",
      "parentUuid": "5f6fa746_ae93195b",
      "revId": "3db1ddb8777038e0b87273ea07fb9e3c195b8531",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}