{
  "comments": [
    {
      "key": {
        "uuid": "776dba42_97a1de10",
        "filename": "go/src/infra/qscheduler/qslib/types/task/task.go",
        "patchSetId": 16
      },
      "lineNbr": 27,
      "author": {
        "id": 1141499
      },
      "writtenOn": "2018-08-13T19:11:40Z",
      "side": 1,
      "message": "Actually, what\u0027s the use of case of labels here?\nIs this for DutIDs?",
      "range": {
        "startLine": 27,
        "startChar": 16,
        "endLine": 27,
        "endChar": 52
      },
      "revId": "c6d4c31a5c387330c7dc077b092cadc0671c9eb4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c1c1cea_e4786b6c",
        "filename": "go/src/infra/qscheduler/qslib/types/task/task.go",
        "patchSetId": 16
      },
      "lineNbr": 28,
      "author": {
        "id": 1141499
      },
      "writtenOn": "2018-08-13T19:11:40Z",
      "side": 1,
      "message": "citation needed :)\nIs map really that much slower that you need to optimize a Go app? I highly doubt that.\nI think stringset.Set [1] will be just fine. You can also define .Equal on it, if necessary.\n\n\nAnd if you do optimize, I\u0027d bet that with small-value-on-the-stack optimization[2] you\u0027d have much better perf:\n\ntype LabelSet struct {\n  first string\n  rest stringset.Set\n}\n\n[1] https://cs.chromium.org/chromium/infra/go/src/go.chromium.org/luci/common/data/stringset/stringset.go?q\u003dstringset\u0026sq\u003dpackage:chromium\u0026g\u003d0\u0026l\u003d15\n[2] https://stackoverflow.com/questions/10315041/meaning-of-acronym-sso-in-the-context-of-stdstring/10319672#10319672",
      "range": {
        "startLine": 28,
        "startChar": 37,
        "endLine": 28,
        "endChar": 64
      },
      "revId": "c6d4c31a5c387330c7dc077b092cadc0671c9eb4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3e076fe_09aacebf",
        "filename": "go/src/infra/qscheduler/qslib/types/task/task.go",
        "patchSetId": 16
      },
      "lineNbr": 43,
      "author": {
        "id": 1141499
      },
      "writtenOn": "2018-08-13T19:11:40Z",
      "side": 1,
      "message": "this is hazardous in Go. \"Equal()\" is typically expected to be non-mutating, hence safe to be called from multiple goroutines.",
      "range": {
        "startLine": 42,
        "startChar": 1,
        "endLine": 43,
        "endChar": 16
      },
      "revId": "c6d4c31a5c387330c7dc077b092cadc0671c9eb4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7da87e6_2febd595",
        "filename": "go/src/infra/qscheduler/qslib/types/task/task.proto",
        "patchSetId": 16
      },
      "lineNbr": 0,
      "author": {
        "id": 1141499
      },
      "writtenOn": "2018-08-13T19:11:40Z",
      "side": 1,
      "message": "Aviv, I think you\u0027d be better taking all your .protos and sticking them into two packages:\n\nAPI: src/go/infra/qscheduler/api/v1/\n  structs that will be used by your RPCs definition (I suspect Request, Run, and hence Vector, will need to be there)\n  You can then still have a dedicated vector package for convenient math funcs on top proto.Vector. Ditto for account and other stuff.\n  (e.g. https://cs.chromium.org/chromium/infra/go/src/go.chromium.org/luci/scheduler/api/scheduler/v1/)\n\nInternal: src/go/infra/qscheduler/internal\n  (e.g., https://cs.chromium.org/chromium/infra/go/src/go.chromium.org/luci/scheduler/appengine/internal/?g\u003d0)\n  structs that are used by your app only. I haven\u0027t not seen any yet, but you know better.\n  Note that `internal` has special meaning in Golang: https://docs.google.com/document/d/1e8kOo3r51b2BWtTs_1uADIA5djfXhPT36s6eHVRIvaU/edit",
      "revId": "c6d4c31a5c387330c7dc077b092cadc0671c9eb4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3500c719_366925c0",
        "filename": "go/src/infra/qscheduler/qslib/types/types.go",
        "patchSetId": 16
      },
      "lineNbr": 36,
      "author": {
        "id": 1141499
      },
      "writtenOn": "2018-08-13T19:11:40Z",
      "side": 1,
      "message": "generally, we don\u0027t add NewXyz just because Xyz exists, particularly if initialization is only for public members and is trivial.\n\nSo, if you follow up CLs actually need to constantly initialize State like this, then keep it. Otherwise, please consider getting rid of ti here and in-lining whenever needed. My guess is that outside of tests (where such func would fit), you don\u0027t actually create new states many places.",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 36,
        "endChar": 1
      },
      "revId": "c6d4c31a5c387330c7dc077b092cadc0671c9eb4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c17603d2_078c3dfb",
        "filename": "go/src/infra/qscheduler/qslib/types/types.proto",
        "patchSetId": 16
      },
      "lineNbr": 33,
      "author": {
        "id": 1141499
      },
      "writtenOn": "2018-08-13T19:11:40Z",
      "side": 1,
      "message": "who\u0027s intended user of this message? Do you intend to expose this as qscheduler API, or is this purely for internal use?",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 8
      },
      "revId": "c6d4c31a5c387330c7dc077b092cadc0671c9eb4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3fe7396a_55986c83",
        "filename": "go/src/infra/qscheduler/qslib/types/types.proto",
        "patchSetId": 16
      },
      "lineNbr": 44,
      "author": {
        "id": 1141499
      },
      "writtenOn": "2018-08-13T19:11:40Z",
      "side": 1,
      "message": "very agree. please drop it.",
      "range": {
        "startLine": 43,
        "startChar": 2,
        "endLine": 44,
        "endChar": 45
      },
      "revId": "c6d4c31a5c387330c7dc077b092cadc0671c9eb4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "492c8166_e2982fc6",
        "filename": "go/src/infra/qscheduler/qslib/types/types.proto",
        "patchSetId": 16
      },
      "lineNbr": 54,
      "author": {
        "id": 1141499
      },
      "writtenOn": "2018-08-13T19:11:40Z",
      "side": 1,
      "message": "how will this be provided to qscheduler? Through API calls, or do you intend to use LUCI config to discover these configs?",
      "range": {
        "startLine": 54,
        "startChar": 3,
        "endLine": 54,
        "endChar": 9
      },
      "revId": "c6d4c31a5c387330c7dc077b092cadc0671c9eb4",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}