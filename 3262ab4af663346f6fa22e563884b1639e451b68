{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5e76958e_1349586f",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/dutharness.go",
        "patchSetId": 7
      },
      "lineNbr": 50,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T02:51:06Z",
      "side": 1,
      "message": "looks like withthis field the logic is more complicated. why just not return instead save it?",
      "range": {
        "startLine": 50,
        "startChar": 1,
        "endLine": 50,
        "endChar": 20
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1188732_ca51e42d",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/dutharness.go",
        "patchSetId": 7
      },
      "lineNbr": 50,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T05:48:27Z",
      "side": 1,
      "message": "It can simplify error handling in here, so we don\u0027t need to handle err after every steps.",
      "parentUuid": "5e76958e_1349586f",
      "range": {
        "startLine": 50,
        "startChar": 1,
        "endLine": 50,
        "endChar": 20
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "31dc5489_bc1dea72",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/dutharness.go",
        "patchSetId": 7
      },
      "lineNbr": 50,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-12T01:24:06Z",
      "side": 1,
      "message": "Closing, will explain in another comment",
      "parentUuid": "d1188732_ca51e42d",
      "range": {
        "startLine": 50,
        "startChar": 1,
        "endLine": 50,
        "endChar": 20
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8903e65_3244ebdf",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/dutharness.go",
        "patchSetId": 7
      },
      "lineNbr": 70,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T02:51:06Z",
      "side": 1,
      "message": "missed return?",
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b518744_534ae382",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/dutharness.go",
        "patchSetId": 7
      },
      "lineNbr": 70,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T05:48:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e8903e65_3244ebdf",
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0272aa35_c1ae4742",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/dutharness.go",
        "patchSetId": 7
      },
      "lineNbr": 189,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T02:51:06Z",
      "side": 1,
      "message": "Why did we moved it? I do not see any reason to move it",
      "range": {
        "startLine": 137,
        "startChar": 1,
        "endLine": 189,
        "endChar": 1
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf2f7122_802662b0",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/dutharness.go",
        "patchSetId": 7
      },
      "lineNbr": 189,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T05:48:27Z",
      "side": 1,
      "message": "Because labelUpdater is tied to DUTHarness instead of bot harness now, so I feel it\u0027s better for readability to move it with dut harness.",
      "parentUuid": "0272aa35_c1ae4742",
      "range": {
        "startLine": 137,
        "startChar": 1,
        "endLine": 189,
        "endChar": 1
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4107ddb_b912b79d",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/dutharness.go",
        "patchSetId": 7
      },
      "lineNbr": 189,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T16:20:50Z",
      "side": 1,
      "message": "There are other 3 methods which belong to updaters which probably we want migrate together.\n\nMaybe to create separate file and put it there for readability?",
      "parentUuid": "bf2f7122_802662b0",
      "range": {
        "startLine": 137,
        "startChar": 1,
        "endLine": 189,
        "endChar": 1
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1ca8ca84_730fe274",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/dutharness.go",
        "patchSetId": 7
      },
      "lineNbr": 189,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T23:33:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c4107ddb_b912b79d",
      "range": {
        "startLine": 137,
        "startChar": 1,
        "endLine": 189,
        "endChar": 1
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f545db1_7b234976",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T02:51:06Z",
      "side": 1,
      "message": "Can we call something like UnitResultDir or GroupResultDir to clean what for it and  distinguish from DutResultDir?",
      "range": {
        "startLine": 35,
        "startChar": 1,
        "endLine": 35,
        "endChar": 11
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "87c7be22_b5dd197e",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 35,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T05:48:27Z",
      "side": 1,
      "message": "Changed it to TaskResultsDir as the dir created here is on per swarming task basis.",
      "parentUuid": "8f545db1_7b234976",
      "range": {
        "startLine": 35,
        "startChar": 1,
        "endLine": 35,
        "endChar": 11
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fbeb22a0_2ac18335",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 39,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T02:51:06Z",
      "side": 1,
      "message": "the same question why we need it here?",
      "range": {
        "startLine": 39,
        "startChar": 1,
        "endLine": 39,
        "endChar": 10
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "91777a05_8e20f720",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 39,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T05:48:27Z",
      "side": 1,
      "message": "I speculate the original intend was to simplify error handling during open harness(otherwise we need repeat \"if err !\u003d nil {return err} after every steps. But since we moved most of logic into DUTHarness, we don\u0027t need it anymore from here.",
      "parentUuid": "fbeb22a0_2ac18335",
      "range": {
        "startLine": 39,
        "startChar": 1,
        "endLine": 39,
        "endChar": 10
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8784b316_15c34d02",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 80,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T02:51:06Z",
      "side": 1,
      "message": "`init result directory`?",
      "range": {
        "startLine": 80,
        "startChar": 38,
        "endLine": 80,
        "endChar": 50
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "335217af_e2470eb7",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 80,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T05:48:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8784b316_15c34d02",
      "range": {
        "startLine": 80,
        "startChar": 38,
        "endLine": 80,
        "endChar": 50
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "092afde8_086a85e5",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 102,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T02:51:06Z",
      "side": 1,
      "message": "AS we return anything here then we probably can stop process if any of step failed? I think that is continue of question why we need save error on DUTHarness level?",
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4436db2_dbeba917",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 102,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T05:48:27Z",
      "side": 1,
      "message": "It can simplify error handling in here, so we don\u0027t need to handle err after every steps.",
      "parentUuid": "092afde8_086a85e5",
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4832b5b1_82ee29c2",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 102,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T16:20:50Z",
      "side": 1,
      "message": "but it can simplify handling in DUTHarness with logic in methods?",
      "parentUuid": "c4436db2_dbeba917",
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a5f1911_71805c83",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 102,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T23:33:40Z",
      "side": 1,
      "message": "Didn\u0027t quick get this point, could you give an example?",
      "parentUuid": "4832b5b1_82ee29c2",
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "582675bb_bbd753e7",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 102,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-12T01:24:06Z",
      "side": 1,
      "message": "the example what i am talking is for example loadLocalState method in DUTHarness. The method starting from checking error and it confusing.\nI think to return err on each step is better as you can simplify the code in DUTHarness and it will be clear explain that the step can fail.\n\nFeel free to ignore if want to proceed with current structure.",
      "parentUuid": "6a5f1911_71805c83",
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9ac533a9_dce0009f",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 102,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-12T04:15:42Z",
      "side": 1,
      "message": "I see your point here, but I found the original change https://crrev.com/c/1453759 was intended to move error handling outside of harness. Given the focus of CL is to split harness so we can accommodate multi-DUTs, I\u0027ll just leave this logic as it is.",
      "parentUuid": "582675bb_bbd753e7",
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "67468ff1_29c65683",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 125,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T02:51:06Z",
      "side": 1,
      "message": "why not return it? as it confused on line 79 ;) i am ok if addressed on separate CL.",
      "range": {
        "startLine": 124,
        "startChar": 2,
        "endLine": 125,
        "endChar": 8
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "493eece3_b2c950e7",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 125,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T05:48:27Z",
      "side": 1,
      "message": "I speculate the original intend was to simplify error handling during open harness(otherwise we need repeat \"if err !\u003d nil {return err} after every steps. But since we moved most of logic into DUTHarness, I think we can return error directly here now.",
      "parentUuid": "67468ff1_29c65683",
      "range": {
        "startLine": 124,
        "startChar": 2,
        "endLine": 125,
        "endChar": 8
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cb039748_16582e22",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 197,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T02:51:06Z",
      "side": 1,
      "message": "I think we can drop it as not used?",
      "range": {
        "startLine": 133,
        "startChar": 0,
        "endLine": 197,
        "endChar": 1
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "46770254_e632c618",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 197,
      "author": {
        "id": 1307525
      },
      "writtenOn": "2021-05-11T05:48:27Z",
      "side": 1,
      "message": "Will do this in a cleanup CL along with drop write local state in file based on dut_id.",
      "parentUuid": "cb039748_16582e22",
      "range": {
        "startLine": 133,
        "startChar": 0,
        "endLine": 197,
        "endChar": 1
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f6efa996_1b62626c",
        "filename": "go/src/infra/cmd/skylab_swarming_worker/internal/swmbot/harness/harness.go",
        "patchSetId": 7
      },
      "lineNbr": 197,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2021-05-11T16:20:50Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "46770254_e632c618",
      "range": {
        "startLine": 133,
        "startChar": 0,
        "endLine": 197,
        "endChar": 1
      },
      "revId": "3262ab4af663346f6fa22e563884b1639e451b68",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}