{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e40c8b09_53b0dcaa",
        "filename": "go/src/infra/appengine/chromium_build_stats/ninjalog/trace.go",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2024-03-18T07:01:32Z",
      "side": 1,
      "message": "The target list can be very large.\n\nFor example, this build has 166 targets. \nhttps://logs.chromium.org/logs/chromium/buildbucket/cr-buildbucket/8753150171484447921/+/u/compile__with_patch_/execution_details#L5556_1\n\nLooking at the document for `tracepb.AttributeValue`, \nhttps://pkg.go.dev/cloud.google.com/go/trace/apiv2/tracepb#Span_Attributes\n\n\u003e The value can be a string up to 256 bytes, a signed 64-bit integer, or the boolean values `true` or `false`. \n\nMy concerns are:\n1) It may exceed the limit when there are many targets.\n2) The recipe also may decide to all when the # of targets is too large. \nShould ninjalog parser provide \"all\" target string for this case?",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 109,
        "endChar": 58
      },
      "revId": "3e262a28effaa2945d62353fe52f78100c889300",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfabb07d_5e71a549",
        "filename": "go/src/infra/appengine/chromium_build_stats/ninjalog/trace.go",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2024-03-18T07:04:31Z",
      "side": 1,
      "message": "Workaround ideas:\n\n- Truncate the joined targets string when it\u0027s too long.\n- Collect targets only from user builds.\n- Change the attribute format to `build_targets.{target_name}: true` similar to `build_conifgs.*`.",
      "parentUuid": "e40c8b09_53b0dcaa",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 109,
        "endChar": 58
      },
      "revId": "3e262a28effaa2945d62353fe52f78100c889300",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "018d4e23_1abc32e4",
        "filename": "go/src/infra/appengine/chromium_build_stats/ninjalog/trace.go",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2024-03-18T07:19:32Z",
      "side": 1,
      "message": "Done. 3rd proposal seems nice to me.",
      "parentUuid": "bfabb07d_5e71a549",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 109,
        "endChar": 58
      },
      "revId": "3e262a28effaa2945d62353fe52f78100c889300",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44c972e1_a8923e6d",
        "filename": "go/src/infra/appengine/chromium_build_stats/ninjalog/trace.go",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2024-03-18T07:57:58Z",
      "side": 1,
      "message": "\u003e 2) The recipe also may decide to all when the # of targets is too large.\nShould ninjalog parser provide \"all\" target string for this case?\n\nDo you think this is necessary? If so, can you add a TODO?\nWe could treat a build without any `build_targets.*` attribute as targets\u003dall. However, it might be easier to add \"targets.all: true\" explicitly for analysis.",
      "parentUuid": "018d4e23_1abc32e4",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 109,
        "endChar": 58
      },
      "revId": "3e262a28effaa2945d62353fe52f78100c889300",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60bb554b_2adebfc1",
        "filename": "go/src/infra/appengine/chromium_build_stats/ninjalog/trace.go",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2024-03-18T08:33:51Z",
      "side": 1,
      "message": "Do you mean to do like this?",
      "parentUuid": "44c972e1_a8923e6d",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 109,
        "endChar": 58
      },
      "revId": "3e262a28effaa2945d62353fe52f78100c889300",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c6c7b6d_c9d4537d",
        "filename": "go/src/infra/appengine/chromium_build_stats/ninjalog/trace.go",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2024-03-19T02:32:57Z",
      "side": 1,
      "message": "Yes, the latest patch looks good. Thank you!",
      "parentUuid": "60bb554b_2adebfc1",
      "range": {
        "startLine": 109,
        "startChar": 12,
        "endLine": 109,
        "endChar": 58
      },
      "revId": "3e262a28effaa2945d62353fe52f78100c889300",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}