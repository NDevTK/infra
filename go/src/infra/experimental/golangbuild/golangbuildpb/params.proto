// Copyright 2022 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

syntax = "proto3";

package golangbuildpb;

option go_package = "infra/experimental/golangbuild/golangbuildpb";

message Inputs {
  // Name of the Gerrit project to be tested.
  string project = 1;

  // GoBranch specifies what Go toolchain branch to use.
  // It is set and applies only when project != "go".
  // Its value is a branch name like "master" or "release-branch.go1.20"
  // (the "refs/heads/" prefix is omitted).
  string go_branch = 2;

  // LongTest controls whether this build should run in long test mode.
  bool long_test = 3;

  // RaceMode controls whether this build should run with the race detector enabled.
  bool race_mode = 4;

  // CompileOnly controls whether tests are compiled, but not run.
  bool compile_only = 5;

  // Extra environment variables to set for building and testing.
  map<string, string> env = 6;

  // List of builders to trigger builds for once make.bash is done.
  // Must be empty if project is not "go." The builds are triggered
  // with the same gerrit and gitiles build data this build was
  // triggered with.
  repeated string builders_to_trigger = 7;
}
