{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "90ee2643_83cabf50",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1554467
      },
      "writtenOn": "2022-10-11T16:08:00Z",
      "side": 1,
      "message": "How can this be tested?",
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99d25de8_f13e40a1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-11T19:22:58Z",
      "side": 1,
      "message": "This was tested in part via the unit tests, and in part by following the build and test instructions in go/working-with-paris, executing a custom plan: https://paste.googleplex.com/6609060378968064, and confirming manually that the contents of a given DUT were read from the DUT.",
      "parentUuid": "90ee2643_83cabf50",
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "824817a4_c00748a4",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 1,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-13T17:46:45Z",
      "side": 1,
      "message": "did we lost the rights?",
      "range": {
        "startLine": 1,
        "startChar": 42,
        "endLine": 1,
        "endChar": 62
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "88f0efa5_65777670",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 1,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-13T18:10:39Z",
      "side": 1,
      "message": "See https://b.corp.google.com/issues/230609017. To my understanding, we\u0027re to avoid adding \"All rights reserved.\" to new open source files. I realize now that this probably not applicable to infra repos. Adding it back.",
      "parentUuid": "824817a4_c00748a4",
      "range": {
        "startLine": 1,
        "startChar": 42,
        "endLine": 1,
        "endChar": 62
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "77ec56f6_b1593f40",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 1,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-13T18:26:59Z",
      "side": 1,
      "message": "ack",
      "parentUuid": "88f0efa5_65777670",
      "range": {
        "startLine": 1,
        "startChar": 42,
        "endLine": 1,
        "endChar": 62
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "01b3cff3_844be600",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 50,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-10T23:56:12Z",
      "side": 1,
      "message": "nit: i think when we annotate we need provide the place where we do which and possible other details. Example:\n`get CBI location: unable to determine if present on the DUT`",
      "range": {
        "startLine": 50,
        "startChar": 36,
        "endLine": 50,
        "endChar": 84
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cd66bf90_bd13cfea",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 50,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-11T17:40:12Z",
      "side": 1,
      "message": "Fixed throughout.",
      "parentUuid": "01b3cff3_844be600",
      "range": {
        "startLine": 50,
        "startChar": 36,
        "endLine": 50,
        "endChar": 84
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6cfc97ce_60b9911c",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-10T23:56:12Z",
      "side": 1,
      "message": "you can simplify by annotate error at the same time\n```\ncbiLocation, err :\u003d buildCBILocation(locateCBIOutput)\nreturn cbiLocation, errors.Annotate(err, \"get CBI location\").Err()\n```",
      "range": {
        "startLine": 53,
        "startChar": 1,
        "endLine": 56,
        "endChar": 2
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "38b7d2e2_644b5b28",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 56,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-11T17:40:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6cfc97ce_60b9911c",
      "range": {
        "startLine": 53,
        "startChar": 1,
        "endLine": 56,
        "endChar": 2
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7634e15a_b67ec5e2",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-10T23:56:12Z",
      "side": 1,
      "message": "nit: that is nil if i am not mistaken",
      "range": {
        "startLine": 57,
        "startChar": 21,
        "endLine": 57,
        "endChar": 24
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6cbec4c4_fee53c2f",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 57,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-11T17:40:12Z",
      "side": 1,
      "message": "Good catch. Made irrelevant by the above change.",
      "parentUuid": "7634e15a_b67ec5e2",
      "range": {
        "startLine": 57,
        "startChar": 21,
        "endLine": 57,
        "endChar": 24
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4592a64e_6de17c31",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 65,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-10T23:56:12Z",
      "side": 1,
      "message": "i think as we have dependency to have some data we need to check it by. the nil is 0\n```\nif len(match) \u003c 2 {\n    ...\n}\n```",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 16
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae97c162_bf0b554d",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 65,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-11T17:40:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4592a64e_6de17c31",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 16
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9c4cbfe_55529230",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 65,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-13T17:46:45Z",
      "side": 1,
      "message": "oh i think i was wrong with 2, as you access index 2 on line 67. i think condition should be ` \u003c 3`?",
      "parentUuid": "ae97c162_bf0b554d",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 16
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "04146765_740a1767",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 65,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-13T18:10:39Z",
      "side": 1,
      "message": "Good catch. Definitely should be \u003c 3. Fixed.",
      "parentUuid": "e9c4cbfe_55529230",
      "range": {
        "startLine": 65,
        "startChar": 4,
        "endLine": 65,
        "endChar": 16
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2d1a39b_04f41d84",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 105,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-10T23:56:12Z",
      "side": 1,
      "message": "same",
      "range": {
        "startLine": 105,
        "startChar": 28,
        "endLine": 105,
        "endChar": 32
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "251b28af_3d7e153d",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 105,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-11T17:40:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f2d1a39b_04f41d84",
      "range": {
        "startLine": 105,
        "startChar": 28,
        "endLine": 105,
        "endChar": 32
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1cc481af_e16e73df",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cros_cbi_test.go",
        "patchSetId": 6
      },
      "lineNbr": 4,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-10T23:56:12Z",
      "side": 1,
      "message": "that is duplicate we already have it in the file.",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 4,
        "endChar": 0
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f7e32a90_8a8d6015",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cros_cbi_test.go",
        "patchSetId": 6
      },
      "lineNbr": 4,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-11T17:40:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1cc481af_e16e73df",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 4,
        "endChar": 0
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6171e73e_c841670e",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cros_cbi_test.go",
        "patchSetId": 6
      },
      "lineNbr": 5,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-13T17:46:45Z",
      "side": 1,
      "message": "same",
      "range": {
        "startLine": 5,
        "startChar": 43,
        "endLine": 5,
        "endChar": 63
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7beb640c_edac4923",
        "filename": "go/src/infra/cros/recovery/internal/components/cros/cbi/cros_cbi_test.go",
        "patchSetId": 6
      },
      "lineNbr": 5,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-13T18:10:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6171e73e_c841670e",
      "range": {
        "startLine": 5,
        "startChar": 43,
        "endLine": 5,
        "endChar": 63
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9df7e94e_df802c1c",
        "filename": "go/src/infra/cros/recovery/internal/execs/cros/cros_cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 1,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-13T17:46:45Z",
      "side": 1,
      "message": "same",
      "range": {
        "startLine": 1,
        "startChar": 41,
        "endLine": 1,
        "endChar": 62
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "21a6c19f_3ea7cc83",
        "filename": "go/src/infra/cros/recovery/internal/execs/cros/cros_cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 1,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-13T18:10:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9df7e94e_df802c1c",
      "range": {
        "startLine": 1,
        "startChar": 41,
        "endLine": 1,
        "endChar": 62
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52fed402_caa0c96d",
        "filename": "go/src/infra/cros/recovery/internal/execs/cros/cros_cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 44,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-10T23:56:12Z",
      "side": 1,
      "message": "just the question is the expected flow as i though that error will be generated if content did not match.",
      "range": {
        "startLine": 41,
        "startChar": 1,
        "endLine": 44,
        "endChar": 43
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "476ceb3a_20563b94",
        "filename": "go/src/infra/cros/recovery/internal/execs/cros/cros_cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 44,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-11T17:40:12Z",
      "side": 1,
      "message": "So, yeah this made me think, as I also found this to be a bit counter-intuitive. This exec is a condition that determines if we should restore CBI contents from UFS. The only way to \"pass\" the condition is to return nil (unless there\u0027s something I\u0027m missing, totally possible). Let me know if you have any other suggestions.",
      "parentUuid": "52fed402_caa0c96d",
      "range": {
        "startLine": 41,
        "startChar": 1,
        "endLine": 44,
        "endChar": 43
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7aa77d69_517f882e",
        "filename": "go/src/infra/cros/recovery/internal/execs/cros/cros_cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 44,
      "author": {
        "id": 1393275
      },
      "writtenOn": "2022-10-11T20:22:56Z",
      "side": 1,
      "message": "i think you need just match name of exec with what it does.\n\nfor example cbiIsCorrupted can tell if is it corrupted or not.\n\nThe method which we have here for me sounds like isCBIDoesNotMatched which rerun nil if that is not matched.\n\nlet me know if that is clear.",
      "parentUuid": "476ceb3a_20563b94",
      "range": {
        "startLine": 41,
        "startChar": 1,
        "endLine": 44,
        "endChar": 43
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "218a1583_bdf2cc1c",
        "filename": "go/src/infra/cros/recovery/internal/execs/cros/cros_cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 44,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-11T21:02:59Z",
      "side": 1,
      "message": "So, I\u0027m not sure that changes too much. If we rename the exec to \"cbiDoesNotMatch\", then we would still need to return an errors.Reason(\"CBI Matches\"), which seems about as awkward as throwing an errors.Reason(\"CBI is valid\"). What do you think? I may be totally missing your point, and am happy with either in full honesty.",
      "parentUuid": "7aa77d69_517f882e",
      "range": {
        "startLine": 41,
        "startChar": 1,
        "endLine": 44,
        "endChar": 43
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cd7dd90c_e54e9d13",
        "filename": "go/src/infra/cros/recovery/internal/execs/cros/cros_cbi.go",
        "patchSetId": 6
      },
      "lineNbr": 44,
      "author": {
        "id": 1545672
      },
      "writtenOn": "2022-10-12T00:25:48Z",
      "side": 1,
      "message": "Spoke about this offline. Renamed the function to `cbiContentsDoNotMatch`",
      "parentUuid": "218a1583_bdf2cc1c",
      "range": {
        "startLine": 41,
        "startChar": 1,
        "endLine": 44,
        "endChar": 43
      },
      "revId": "c00b25c9468d8a46b43cec91e0f2b9aa70059921",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}