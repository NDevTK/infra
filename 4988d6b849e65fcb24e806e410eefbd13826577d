{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7c055fbb_e3557521",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2023-03-23T00:03:13Z",
      "side": 1,
      "message": "If it just a periodic job, have you considered running it as a builder itself? It can still be written in Go. Maintaining a GAE app using all production guidelines is non-trivial.\n\nWill it serve any API itself?",
      "revId": "4988d6b849e65fcb24e806e410eefbd13826577d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "231cd123_76e0bad4",
        "filename": "go/src/infra/appengine/builder_health_indicators/app.yaml",
        "patchSetId": 2
      },
      "lineNbr": 6,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2023-03-23T00:03:13Z",
      "side": 1,
      "message": "this can be deleted, by default all requests will be routed to the Go code, which is what we want anyway",
      "range": {
        "startLine": 3,
        "startChar": 0,
        "endLine": 6,
        "endChar": 16
      },
      "revId": "4988d6b849e65fcb24e806e410eefbd13826577d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1db8a605_7cce126e",
        "filename": "go/src/infra/appengine/builder_health_indicators/app.yaml",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2023-03-23T00:03:13Z",
      "side": 1,
      "message": "I\u0027m not familiar with this. Are you sure it is needed and it works for standard GAE (not GAE Flex)?",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 11,
        "endChar": 12
      },
      "revId": "4988d6b849e65fcb24e806e410eefbd13826577d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "115573ea_370e9923",
        "filename": "go/src/infra/appengine/builder_health_indicators/cron.yaml",
        "patchSetId": 2
      },
      "lineNbr": 4,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2023-03-23T00:03:13Z",
      "side": 1,
      "message": "you may want to use e.g. \"every day 00:00\" to control precisely when updates happen. With \"every 24 hours\" the initial time-of-day offset is basically random.",
      "range": {
        "startLine": 4,
        "startChar": 12,
        "endLine": 4,
        "endChar": 26
      },
      "revId": "4988d6b849e65fcb24e806e410eefbd13826577d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "915bdb20_2387c4c3",
        "filename": "go/src/infra/appengine/builder_health_indicators/deploy.sh",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2023-03-23T00:03:13Z",
      "side": 1,
      "message": "If you want to run this service as a real \"production\" one, there are (poorly documented) steps to setup Terraform automation and build \u0026 deploy automation. Production services generally must not be deployed or managed from workstations.",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 13
      },
      "revId": "4988d6b849e65fcb24e806e410eefbd13826577d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9a4f1e4e_184ff6c5",
        "filename": "go/src/infra/appengine/builder_health_indicators/deploy.sh",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2023-03-23T00:03:13Z",
      "side": 1,
      "message": "Does this have a staging instance? Once it is running in production, how are you going to verify changes are safe to deploy without e.g. inadvertly marking all builders as red?",
      "range": {
        "startLine": 7,
        "startChar": 23,
        "endLine": 7,
        "endChar": 60
      },
      "revId": "4988d6b849e65fcb24e806e410eefbd13826577d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "45984977_6cfab2ea",
        "filename": "go/src/infra/appengine/builder_health_indicators/main.go",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2023-03-23T00:03:13Z",
      "side": 1,
      "message": "note this is needed only if you are planning to use Cloud Datastore",
      "range": {
        "startLine": 17,
        "startChar": 2,
        "endLine": 17,
        "endChar": 36
      },
      "revId": "4988d6b849e65fcb24e806e410eefbd13826577d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64b194e7_babd0a09",
        "filename": "go/src/infra/appengine/builder_health_indicators/main.go",
        "patchSetId": 2
      },
      "lineNbr": 21,
      "author": {
        "id": 1002539
      },
      "writtenOn": "2023-03-23T00:03:13Z",
      "side": 1,
      "message": "https://pkg.go.dev/go.chromium.org/luci/server/cron#RegisterHandler\n\n```\ncron.RegisterHandler(\"generate\", generate.Generate)\n```\n\nThen change the URL in cron.yaml to /internal/cron/generate (this is where `cron` module exposes handlers).\n\nAmong other things, this will do correct authentication and will produce monitoring metrics.",
      "range": {
        "startLine": 21,
        "startChar": 2,
        "endLine": 21,
        "endChar": 62
      },
      "revId": "4988d6b849e65fcb24e806e410eefbd13826577d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}