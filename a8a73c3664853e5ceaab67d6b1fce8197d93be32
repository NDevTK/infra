{
  "comments": [
    {
      "key": {
        "uuid": "c5c53ea6_0e967118",
        "filename": "appengine/findit/findit_v2/model/atomic_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "unnecessary. JSON properties are not indexable",
      "range": {
        "startLine": 66,
        "startChar": 32,
        "endLine": 66,
        "endChar": 47
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9184f5b8_e5707ad0",
        "filename": "appengine/findit/findit_v2/model/atomic_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 66,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c5c53ea6_0e967118",
      "range": {
        "startLine": 66,
        "startChar": 32,
        "endLine": 66,
        "endChar": 47
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fcec182c_aa00008d",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "collections.defaultdict(lambda: {\u0027tests\u0027: []})\n\nthen L21-24 are not needed",
      "range": {
        "startLine": 19,
        "startChar": 18,
        "endLine": 19,
        "endChar": 20
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "065eecc0_9139be11",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fcec182c_aa00008d",
      "range": {
        "startLine": 19,
        "startChar": 18,
        "endLine": 19,
        "endChar": 20
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1f2c6572_e8d12cac",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "trailing comma",
      "range": {
        "startLine": 30,
        "startChar": 53,
        "endLine": 30,
        "endChar": 54
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6ebb6b33_a0f694e2",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1f2c6572_e8d12cac",
      "range": {
        "startLine": 30,
        "startChar": 53,
        "endLine": 30,
        "endChar": 54
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8c6b9a0_1b1b1b11",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "do we have a guarantee that there will be at most one test failure entity without \"test\" for a given step?\n\nlet\u0027s at least\n\n  assert \u0027properties\u0027 not in step_failures\n\nbefore this",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d83b6561_74544b8e",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a8c6b9a0_1b1b1b11",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "58817705_3b1a5a22",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 39,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "intentional?",
      "range": {
        "startLine": 39,
        "startChar": 5,
        "endLine": 39,
        "endChar": 6
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fbd5f055_9fea60b7",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 39,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "58817705_3b1a5a22",
      "range": {
        "startLine": 39,
        "startChar": 5,
        "endLine": 39,
        "endChar": 6
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a6c59dc_688bc3ae",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "this doc should explain entity key",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4a229b18_e1af4214",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 44,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Added.\n\nI don\u0027t expect Findit to get any individual failure entities, instead it\u0027ll always gets all failures in the same build.",
      "parentUuid": "5a6c59dc_688bc3ae",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d05e7b4e_de1d0574",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "shouldn\u0027t this be a part of the key?\n\nwhat is the key?",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a031471_9c025c09",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "The is is actually Key(LuciFailedBuild, \u003cbuild_id\u003e, CompileFailure, \u003cnumeric_id\u003e(no meaning)).\n\nPlease also see my comment above.",
      "parentUuid": "d05e7b4e_de1d0574",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b9455d1_20a45c60",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "nit: there will be less indentation if this condition is reversed",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2ba34eba_37b07cee",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 92,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4b9455d1_20a45c60",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "75d961bc_feff050b",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 104,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "nit: immutable",
      "range": {
        "startLine": 103,
        "startChar": 58,
        "endLine": 104,
        "endChar": 13
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c0da7283_e05891e1",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 104,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "75d961bc_feff050b",
      "range": {
        "startLine": 103,
        "startChar": 58,
        "endLine": 104,
        "endChar": 13
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7b39fa6_ae700201",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 173,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "not for this CL: this means we store project 3 times and bucket 2 times unnecessarily. It is sufficient to store only builder_id, and then\n\n  @property\n  def luci_project(self):\n    return ... use self.builder_id ...\n\n  @property\n  def bucket_id(self):\n    return ... use self.builder_id ...",
      "range": {
        "startLine": 171,
        "startChar": 3,
        "endLine": 173,
        "endChar": 57
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8561b266_9883bf52",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 173,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Agreed. Done.",
      "parentUuid": "f7b39fa6_ae700201",
      "range": {
        "startLine": 171,
        "startChar": 3,
        "endLine": 173,
        "endChar": 57
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df089c1b_d5acd17b",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 180,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "i know i said this before, and I am not asking for action now, but this is another example of not-very-valuable piece of code that took some of our engineering time (30 LOC here, test code, time to review this code * number of reviewers), but same can be achieved in a cheaper way: instead of calling TestFailureAnalysis.Create(.....) call.\n\nOne of the problems Create() solves is not having to construct bucket_id and builder_id properties yourself, but i think the fact we have to construct them is the problem in the first place, see my comment above",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c09b0cf3_58224854",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 187,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "does this really belong here, or in the callsite?\n\nembedding RPCs deep inside the code (like here in the model) makes it hard to reason about RPCs that a particular handles/task/cronjob is making.",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e08ad5ae_25706329",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 187,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Removed.\n\nWill add the method to caller side",
      "parentUuid": "c09b0cf3_58224854",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "93b82f18_151c9a5f",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 203,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "one thing I\u0027ve noticed is that FindIt has significantly more entity kinds than in any other project I\u0027ve seen. It is possible that findit abuses datastore for things that are normally solved in a different way. I also suspect that this might be the reason why CATs generally do not talk about models in design docs, because there is so many of them; but the problem might be that it is too many of them",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9599c9cc_faded591",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 220,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "i think it would be less code if we put\n\n  if failure.test is not None:\n\nbefore L214. Then we don\u0027t need these 4 LOC",
      "range": {
        "startLine": 216,
        "startChar": 3,
        "endLine": 220,
        "endChar": 0
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0b2246c_309e0e8a",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 220,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Done.\n\nWanted to make sure if all failures here don\u0027t have test level info, we can still have a failure dict like:\n{\n  \u0027step1\u0027: [],\n  \u0027step2\u0027: [],\n  ...\n}",
      "parentUuid": "9599c9cc_faded591",
      "range": {
        "startLine": 216,
        "startChar": 3,
        "endLine": 220,
        "endChar": 0
      },
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "283b7309_08247ec7",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 261,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-19T18:49:04Z",
      "side": 1,
      "message": "same here",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "556044a5_17b3b6c8",
        "filename": "appengine/findit/findit_v2/model/test_failure.py",
        "patchSetId": 2
      },
      "lineNbr": 261,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-23T02:38:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "283b7309_08247ec7",
      "revId": "a8a73c3664853e5ceaab67d6b1fce8197d93be32",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}