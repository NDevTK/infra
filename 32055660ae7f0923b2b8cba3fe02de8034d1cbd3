{
  "comments": [
    {
      "key": {
        "uuid": "77a9b597_dc7d5966",
        "filename": "appengine/findit/services/disabled_tests/disabled_tests.sql",
        "patchSetId": 3
      },
      "lineNbr": 6,
      "author": {
        "id": 1164104
      },
      "writtenOn": "2019-07-19T23:29:41Z",
      "side": 1,
      "message": "Not this CL, but do we care about the frequency of a test run?\n\nScenario 1: test1 is disabled, and runs 10 times a day.\nScenario 2: test2 is disabled, and runs 100 times a day.\n\nDo we consider the re-enabling of test2 is more important than test1? If we do, we may want to track the total #runs.",
      "range": {
        "startLine": 6,
        "startChar": 2,
        "endLine": 6,
        "endChar": 29
      },
      "revId": "32055660ae7f0923b2b8cba3fe02de8034d1cbd3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c9a1f530_ca541cea",
        "filename": "appengine/findit/services/disabled_tests/disabled_tests.sql",
        "patchSetId": 3
      },
      "lineNbr": 6,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-20T00:00:32Z",
      "side": 1,
      "message": "That is an interesting idea. Though we need to put more thoughts on it: 1. since we only query disabled runs, will tests that are disabled all platforms got biased over tests that are only disabled on one platform? Or we should track runs per platform? 2. can we track it in a different way? For example, if tests in one suite will have the same frequency, can we track test suites instead?\n\nWe may need to talk with EngProd team to get their inputs as well.",
      "parentUuid": "77a9b597_dc7d5966",
      "range": {
        "startLine": 6,
        "startChar": 2,
        "endLine": 6,
        "endChar": 29
      },
      "revId": "32055660ae7f0923b2b8cba3fe02de8034d1cbd3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bda03a7c_bb6013b4",
        "filename": "appengine/findit/services/disabled_tests/disabled_tests.sql",
        "patchSetId": 3
      },
      "lineNbr": 6,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-20T05:04:00Z",
      "side": 1,
      "message": "thinking about DISTINCT a bit more, with such usage, if a test was re-enabled, then this query will still return it for 2 days, because the query will see old records with \"SKIP\" in run.expected\n\nconsider\n1) GROUP BY step_name, test_name\n2) ARRAY_AGG(run ORDER BY start_time DESC LIMIT 1)[OFFSET(0)] latest_run,\n   to get the latest run\n3) HAVING \u0027SKIP\u0027 in UNNEST(latest_run.expected)\n\nsuch query will see that a test was re-enabled pretty much immediately",
      "range": {
        "startLine": 6,
        "startChar": 2,
        "endLine": 6,
        "endChar": 10
      },
      "revId": "32055660ae7f0923b2b8cba3fe02de8034d1cbd3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "611c5d03_654585e4",
        "filename": "appengine/findit/services/disabled_tests/disabled_tests.sql",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1164104
      },
      "writtenOn": "2019-07-19T23:29:41Z",
      "side": 1,
      "message": "Could one test have multiple bugs?",
      "range": {
        "startLine": 13,
        "startChar": 11,
        "endLine": 13,
        "endChar": 19
      },
      "revId": "32055660ae7f0923b2b8cba3fe02de8034d1cbd3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5c6b95e3_04027830",
        "filename": "appengine/findit/services/disabled_tests/disabled_tests.sql",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1157909
      },
      "writtenOn": "2019-07-20T00:00:32Z",
      "side": 1,
      "message": "It\u0027s possible: for example a test was disabled on one platform because of a bug, and then got disabled on another platform because of another bug.",
      "parentUuid": "611c5d03_654585e4",
      "range": {
        "startLine": 13,
        "startChar": 11,
        "endLine": 13,
        "endChar": 19
      },
      "revId": "32055660ae7f0923b2b8cba3fe02de8034d1cbd3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58ee6c69_842408bd",
        "filename": "appengine/findit/services/disabled_tests/disabled_tests.sql",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1114299
      },
      "writtenOn": "2019-07-20T05:04:00Z",
      "side": 1,
      "message": "nit: very unusual to see LEFT JOIN without a condition. Consider:\n\n FROM `test-results-hrd.events.test_results` AS tr, tr.bugs AS bug",
      "range": {
        "startLine": 11,
        "startChar": 40,
        "endLine": 13,
        "endChar": 27
      },
      "revId": "32055660ae7f0923b2b8cba3fe02de8034d1cbd3",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}